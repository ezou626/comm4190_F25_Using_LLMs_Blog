<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Eric Zou">
<meta name="dcterms.date" content="2025-12-12">
<meta name="description" content="Exploring different approaches to coordinating multiple agents in a spatial environment">

<title>Turn-Based vs Time-Based: Synchronization Strategies – My Explorations with LLMs in Social Contexts</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-0b37c64f34216b628666a8dac638b53b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">My Explorations with LLMs in Social Contexts</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ezou626"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/EDubsZ123"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Turn-Based vs Time-Based: Synchronization Strategies</h1>
                  <div>
        <div class="description">
          Exploring different approaches to coordinating multiple agents in a spatial environment
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Agents</div>
                <div class="quarto-category">Simulation</div>
                <div class="quarto-category">Infrastructure</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Eric Zou </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 12, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="the-synchronization-problem" class="level1">
<h1>The Synchronization Problem</h1>
<p>When you have multiple agents (and eventually humans) acting in the same 2D space, you need to decide: <strong>how do they act relative to each other?</strong></p>
<p>In previous posts, we’ve been using a simple sequential approach—agents take turns one after another. But as we scale up and prepare for human-AI interaction experiments, we need to think more carefully about synchronization strategies.</p>
<p>This post explores two fundamental approaches: 1. <strong>Turn-Based</strong>: Agents act sequentially in a fixed order 2. <strong>Time-Based</strong>: Agents act concurrently within discrete time steps</p>
<p>Each has different implications for behavior, fairness, and realism.</p>
<section id="turn-based-approach" class="level2">
<h2 class="anchored" data-anchor-id="turn-based-approach">Turn-Based Approach</h2>
<p>In a turn-based system, agents act one at a time in a fixed sequence. This is what we’ve been doing so far.</p>
<section id="characteristics" class="level3">
<h3 class="anchored" data-anchor-id="characteristics">Characteristics:</h3>
<ul>
<li><strong>Deterministic</strong>: Same order every time</li>
<li><strong>Sequential</strong>: Each agent sees the world state after the previous agent’s action</li>
<li><strong>Simple</strong>: Easy to reason about and debug</li>
<li><strong>Fair</strong>: Every agent gets exactly one action per “round”</li>
</ul>
</section>
<section id="implementation" class="level3">
<h3 class="anchored" data-anchor-id="implementation">Implementation</h3>
<div id="cell-3" class="cell" data-execution_count="54">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dataclasses <span class="im">import</span> dataclass, field</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> List, Optional</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openai <span class="im">import</span> OpenAI</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>load_dotenv(<span class="st">"../../.env"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> OpenAI()</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>GRID_SIZE <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="at">@dataclass</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Agent:</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    name: <span class="bu">str</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    x: <span class="bu">int</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    y: <span class="bu">int</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    color: <span class="bu">str</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    history: <span class="bu">list</span> <span class="op">=</span> field(default_factory<span class="op">=</span><span class="bu">list</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> move(<span class="va">self</span>, dx, dy):</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.x <span class="op">=</span> <span class="bu">max</span>(<span class="dv">0</span>, <span class="bu">min</span>(GRID_SIZE<span class="op">-</span><span class="dv">1</span>, <span class="va">self</span>.x <span class="op">+</span> dx))</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.y <span class="op">=</span> <span class="bu">max</span>(<span class="dv">0</span>, <span class="bu">min</span>(GRID_SIZE<span class="op">-</span><span class="dv">1</span>, <span class="va">self</span>.y <span class="op">+</span> dy))</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run_turn_based_round(agents, shared_transcript):</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="co">    Turn-based: Each agent acts sequentially in a fixed order.</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="co">    Each agent sees the world state AFTER all previous agents have acted.</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> agent <span class="kw">in</span> agents:</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Agent sees current world state (which includes previous agents' actions)</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>        others <span class="op">=</span> [a <span class="cf">for</span> a <span class="kw">in</span> agents <span class="cf">if</span> a <span class="op">!=</span> agent]</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>        others_loc <span class="op">=</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join([<span class="ss">f"- </span><span class="sc">{</span>a<span class="sc">.</span>name<span class="sc">}</span><span class="ss">: (</span><span class="sc">{</span>a<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>a<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span> <span class="cf">for</span> a <span class="kw">in</span> others])</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>        system_prompt <span class="op">=</span> <span class="ss">f"""</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="ss">You have just joined an online multiplayer chatroom as an avatar in a 2D grid. Discuss any topic, including those beyond the grid.</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="ss">You are </span><span class="sc">{</span>agent<span class="sc">.</span>name<span class="sc">}</span><span class="ss">, positioned at (</span><span class="sc">{</span>agent<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agent<span class="sc">.</span>y<span class="sc">}</span><span class="ss">) in a 20x20 grid.</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="ss">Other avatars currently visible:</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="sc">{</span>others_loc<span class="sc">}</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="ss">Recent chat messages:</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="sc">{</span><span class="bu">chr</span>(<span class="dv">10</span>)<span class="sc">.</span>join(shared_transcript[<span class="op">-</span><span class="dv">3</span>:]) <span class="cf">if</span> shared_transcript <span class="cf">else</span> <span class="st">"No messages yet."</span><span class="sc">}</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="ss">You can do BOTH:</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="ss">1. Move your avatar using [MOVE: DIRECTION] (UP, DOWN, LEFT, RIGHT)</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="ss">2. Chat about anything - the grid, your position, or any topic you want</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="ss">You can move and speak in the same turn. Format: [MOVE: DIRECTION] followed by your message, or just speak without moving.</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="ss">Keep your response short (1-2 sentences).</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>            model<span class="op">=</span><span class="st">"gpt-4o"</span>,</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>            messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: system_prompt}]</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>        content <span class="op">=</span> response.choices[<span class="dv">0</span>].message.content.strip()</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Parse and execute actions - can do both move and speak</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>        match <span class="op">=</span> re.search(<span class="vs">r'</span><span class="ch">\[</span><span class="vs">MOVE:</span><span class="dv">\s</span><span class="op">*</span><span class="kw">(</span><span class="dv">\w</span><span class="op">+</span><span class="kw">)</span><span class="ch">\]</span><span class="vs">'</span>, content)</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> match:</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>            direction <span class="op">=</span> match.group(<span class="dv">1</span>).upper()</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> direction <span class="op">==</span> <span class="st">"UP"</span>: agent.move(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> direction <span class="op">==</span> <span class="st">"DOWN"</span>: agent.move(<span class="dv">0</span>, <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> direction <span class="op">==</span> <span class="st">"LEFT"</span>: agent.move(<span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> direction <span class="op">==</span> <span class="st">"RIGHT"</span>: agent.move(<span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extract message (remove MOVE command if present)</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>        message <span class="op">=</span> re.sub(<span class="vs">r'</span><span class="ch">\[</span><span class="vs">MOVE:</span><span class="dv">\s</span><span class="op">*</span><span class="dv">\w</span><span class="op">+</span><span class="ch">\]</span><span class="vs">'</span>, <span class="st">''</span>, content).strip()</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> message:</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>            shared_transcript.append(<span class="ss">f"</span><span class="sc">{</span>agent<span class="sc">.</span>name<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>message<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>        <span class="co"># World state has now changed for the next agent</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>agent<span class="sc">.</span>name<span class="sc">}</span><span class="ss"> acted. World state updated."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-4" class="cell" data-execution_count="55">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Run turn-based rounds</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>agents <span class="op">=</span> [</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    Agent(<span class="st">"Alice"</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="st">"red"</span>),</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    Agent(<span class="st">"Bob"</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="st">"blue"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>transcript <span class="op">=</span> []</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== Turn-Based Rounds ==="</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Initial positions: Alice (</span><span class="sc">{</span>agents[<span class="dv">0</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents[<span class="dv">0</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">), Bob (</span><span class="sc">{</span>agents[<span class="dv">1</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents[<span class="dv">1</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>num_rounds <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_rounds):</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Round </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">:"</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    run_turn_based_round(agents, transcript)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Positions: Alice (</span><span class="sc">{</span>agents[<span class="dv">0</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents[<span class="dv">0</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">), Bob (</span><span class="sc">{</span>agents[<span class="dv">1</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents[<span class="dv">1</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>()</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Final positions: Alice (</span><span class="sc">{</span>agents[<span class="dv">0</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents[<span class="dv">0</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">), Bob (</span><span class="sc">{</span>agents[<span class="dv">1</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents[<span class="dv">1</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Total messages: </span><span class="sc">{</span><span class="bu">len</span>(transcript)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Transcript:"</span>)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> msg <span class="kw">in</span> transcript:</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>msg<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>=== Turn-Based Rounds ===
Initial positions: Alice (5, 5), Bob (15, 15)

Round 1:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (5, 5), Bob (14, 15)

Round 2:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (6, 5), Bob (13, 15)

Round 3:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (7, 5), Bob (14, 15)

Round 4:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (7, 5), Bob (15, 15)

Round 5:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (8, 5), Bob (15, 14)

Round 6:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (8, 6), Bob (14, 14)

Round 7:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (9, 6), Bob (13, 14)

Round 8:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (9, 7), Bob (13, 15)

Round 9:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (9, 8), Bob (12, 15)

Round 10:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (9, 9), Bob (11, 15)

Final positions: Alice (9, 9), Bob (11, 15)

Total messages: 20

Transcript:
  Alice: It's nice to meet you, Bob! I'm at (5, 5) right now. How's your spot at (15, 15)?
  Bob: Thanks, Alice! My spot at (15, 15) is pretty central. How's the view from (5, 5)?
  Alice: The view here is a bit quieter but cozy compared to the center. I'm headed slightly east to explore! How's the atmosphere up north by (15, 15)?
  Bob: The atmosphere here at (14, 15) is pretty lively, Alice! I'm curious to see more of this area myself. How's it going a bit further east from your new spot?
  Alice: Heading east to (7, 5) now. It's still cozy here, but I'm fascinated about what's previously been around this area. Any fun places near where you are, Bob?
  Bob: Hey Alice, now at (14, 15) and heading to (15, 15). The atmosphere's still lively here, with hints of digital chatter in the air! What intrigues me more, though, is what's beyond this grid. Any thoughts on what might be out there?
  Alice: Hey Bob, I'm fascinated by the concept of virtual spaces beyond our grid! What if there are endless expanses or completely different environments out there?
  Bob: Alice, I'm now at (15, 15) and I'm imagining there might be virtual landscapes filled with pixelated forests or even oceanic realms beyond our grid. What about you—have any wild ideas?
  Alice: Bob, imagining a pixelated universe sounds amazing! Maybe there are zones where time flows differently, or where the laws of physics don't apply. What if some areas have zero gravity or allow instant teleportation?
  Bob: Alice, I love the idea of zones with zero gravity! Imagine if we could soar through the grid or suddenly pop up somewhere else. It's like a dance of infinite possibilities!
  Alice: Bob, I bet if we explore further, we'll find hidden portals—like wormholes—that can take us to entirely new grids. It could be a network of interconnected worlds waiting to be discovered!
  Bob: Alice, discovering a network of interconnected worlds sounds thrilling! Plus, exploring these portals could lead to universes where creativity is the law.
  Alice: Bob, wouldn't it be amazing if these universes had their own unique rules, like gravity acting sideways or time flowing backward? Each portal could be a gateway to endless creativity!
  Bob: Alice, imagine if we found a portal that led to a grid where we could bend the laws of logic or even invent new elements on a whim!
  Alice: Bob, I wonder if some portals might even let us rewrite history or speak in languages unknown to us. Every journey is a new possibility!
  Bob: Alice, it's fascinating to think about a grid where distance is irrelevant, and we could teleport instantly to any point, chatting with avatars from past, present, and future!
  Alice: Bob, imagine if in this new grid, time flowed differently in each square. We could explore alternate realities, each step revealing a new version of our universe!
  Bob: Alice, have you ever thought about grids that not only change space and time but also the rules of physics themselves? Imagine stepping into a square where gravity pulls upward, or light dances in colors we've never seen before!
  Alice: Bob, imagine if we discovered squares where each move transformed our avatars into entirely different beings, experiencing life through their eyes. What new perspectives would we gain in such a mysterious grid?
  Bob: Alice, wouldn't it be fascinating if some squares granted us the wisdom of countless civilizations, allowing us to see the world in an entirely new light? Each space holding profound secrets of existence—what a journey that would be!</code></pre>
</div>
</div>
</section>
<section id="pros-and-cons" class="level3">
<h3 class="anchored" data-anchor-id="pros-and-cons">Pros and Cons</h3>
<p><strong>Advantages:</strong> - Predictable and deterministic - Easy to implement and debug - No race conditions - Fair (everyone gets equal turns) - Good for turn-based games or strategic interactions</p>
<p><strong>Disadvantages:</strong> - Order matters: first agent has advantage - Not realistic for real-time scenarios - Can feel artificial to humans - Sequential processing is slow for many agents - Agents later in the order see a different world state</p>
</section>
</section>
<section id="time-based-approach" class="level2">
<h2 class="anchored" data-anchor-id="time-based-approach">Time-Based Approach</h2>
<p>In a time-based system, all agents act “simultaneously” within discrete time steps. Actions are collected first, then applied all at once.</p>
<section id="characteristics-1" class="level3">
<h3 class="anchored" data-anchor-id="characteristics-1">Characteristics:</h3>
<ul>
<li><strong>Concurrent</strong>: All agents decide actions based on the same world state</li>
<li><strong>Batch Processing</strong>: Actions collected, then applied together</li>
<li><strong>More Realistic</strong>: Mimics real-time behavior</li>
<li><strong>Parallelizable</strong>: Can generate actions in parallel</li>
</ul>
</section>
<section id="implementation-1" class="level3">
<h3 class="anchored" data-anchor-id="implementation-1">Implementation</h3>
<div id="cell-7" class="cell" data-execution_count="56">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="at">@dataclass</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Action:</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    agent: Agent</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    direction: Optional[<span class="bu">str</span>] <span class="op">=</span> <span class="va">None</span>  <span class="co"># Move direction if moving</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    message: Optional[<span class="bu">str</span>] <span class="op">=</span> <span class="va">None</span>  <span class="co"># Message if speaking</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_agent_action(agent: Agent, all_agents: List[Agent], shared_transcript: List[<span class="bu">str</span>]) <span class="op">-&gt;</span> Action:</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">    Generate an action for a single agent based on CURRENT world state.</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">    This can be called in parallel for all agents.</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    others <span class="op">=</span> [a <span class="cf">for</span> a <span class="kw">in</span> all_agents <span class="cf">if</span> a <span class="op">!=</span> agent]</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    others_loc <span class="op">=</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join([<span class="ss">f"- </span><span class="sc">{</span>a<span class="sc">.</span>name<span class="sc">}</span><span class="ss">: (</span><span class="sc">{</span>a<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>a<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span> <span class="cf">for</span> a <span class="kw">in</span> others])</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    system_prompt <span class="op">=</span> <span class="ss">f"""</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="ss">You have just joined an online multiplayer chatroom as an avatar in a 2D grid. Discuss any topic, including those beyond the grid.</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="ss">You are </span><span class="sc">{</span>agent<span class="sc">.</span>name<span class="sc">}</span><span class="ss">, positioned at (</span><span class="sc">{</span>agent<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agent<span class="sc">.</span>y<span class="sc">}</span><span class="ss">) in a 20x20 grid.</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="ss">Other avatars currently visible:</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="sc">{</span>others_loc<span class="sc">}</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="ss">Recent chat messages:</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="sc">{</span><span class="bu">chr</span>(<span class="dv">10</span>)<span class="sc">.</span>join(shared_transcript[<span class="op">-</span><span class="dv">3</span>:]) <span class="cf">if</span> shared_transcript <span class="cf">else</span> <span class="st">"No messages yet."</span><span class="sc">}</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="ss">IMPORTANT: All avatars are deciding their actions simultaneously. You don't know what others will do this turn.</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="ss">You can do BOTH:</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="ss">1. Move your avatar using [MOVE: DIRECTION] (UP, DOWN, LEFT, RIGHT)</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="ss">2. Chat about anything - the grid, your position, or any topic you want</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="ss">You can move and speak in the same turn. Format: [MOVE: DIRECTION] followed by your message, or just speak without moving.</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="ss">Keep your response short (1-2 sentences).</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>        model<span class="op">=</span><span class="st">"gpt-4o"</span>,</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>        messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: system_prompt}]</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    content <span class="op">=</span> response.choices[<span class="dv">0</span>].message.content.strip()</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Parse actions - can do both move and speak</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>    direction <span class="op">=</span> <span class="va">None</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    match <span class="op">=</span> re.search(<span class="vs">r'</span><span class="ch">\[</span><span class="vs">MOVE:</span><span class="dv">\s</span><span class="op">*</span><span class="kw">(</span><span class="dv">\w</span><span class="op">+</span><span class="kw">)</span><span class="ch">\]</span><span class="vs">'</span>, content)</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> match:</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>        direction <span class="op">=</span> match.group(<span class="dv">1</span>).upper()</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract message (remove MOVE command if present)</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>    message <span class="op">=</span> re.sub(<span class="vs">r'</span><span class="ch">\[</span><span class="vs">MOVE:</span><span class="dv">\s</span><span class="op">*</span><span class="dv">\w</span><span class="op">+</span><span class="ch">\]</span><span class="vs">'</span>, <span class="st">''</span>, content).strip()</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> message:</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>        message <span class="op">=</span> <span class="va">None</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Action(agent, direction<span class="op">=</span>direction, message<span class="op">=</span>message)</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run_time_based_round(agents: List[Agent], shared_transcript: List[<span class="bu">str</span>]):</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a><span class="co">    Time-based: All agents decide actions simultaneously based on the same world state.</span></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a><span class="co">    Actions are then applied all at once.</span></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Phase 1: Collect actions (can be parallelized)</span></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>    actions <span class="op">=</span> []</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sequential version (for now)</span></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> agent <span class="kw">in</span> agents:</span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>        action <span class="op">=</span> get_agent_action(agent, agents, shared_transcript)</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>        actions.append(action)</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Phase 2: Apply all actions</span></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> action <span class="kw">in</span> actions:</span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Apply move if present</span></span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> action.direction:</span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>            direction <span class="op">=</span> action.direction</span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> direction <span class="op">==</span> <span class="st">"UP"</span>: action.agent.move(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> direction <span class="op">==</span> <span class="st">"DOWN"</span>: action.agent.move(<span class="dv">0</span>, <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> direction <span class="op">==</span> <span class="st">"LEFT"</span>: action.agent.move(<span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> direction <span class="op">==</span> <span class="st">"RIGHT"</span>: action.agent.move(<span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Apply message if present</span></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> action.message:</span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>            shared_transcript.append(<span class="ss">f"</span><span class="sc">{</span>action<span class="sc">.</span>agent<span class="sc">.</span>name<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>action<span class="sc">.</span>message<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Applied </span><span class="sc">{</span><span class="bu">len</span>(actions)<span class="sc">}</span><span class="ss"> actions simultaneously."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="parallel-version" class="level3">
<h3 class="anchored" data-anchor-id="parallel-version">Parallel Version</h3>
<p>Since agents decide independently, we can parallelize action generation:</p>
<div id="cell-9" class="cell" data-execution_count="57">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Run time-based rounds</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>agents_time <span class="op">=</span> [</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    Agent(<span class="st">"Alice"</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="st">"red"</span>),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    Agent(<span class="st">"Bob"</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="st">"blue"</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>transcript_time <span class="op">=</span> []</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== Time-Based Rounds ==="</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Initial positions: Alice (</span><span class="sc">{</span>agents_time[<span class="dv">0</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_time[<span class="dv">0</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">), Bob (</span><span class="sc">{</span>agents_time[<span class="dv">1</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_time[<span class="dv">1</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>num_rounds <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_rounds):</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Round </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">:"</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    run_time_based_round(agents_time, transcript_time)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Positions: Alice (</span><span class="sc">{</span>agents_time[<span class="dv">0</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_time[<span class="dv">0</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">), Bob (</span><span class="sc">{</span>agents_time[<span class="dv">1</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_time[<span class="dv">1</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>()</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Final positions: Alice (</span><span class="sc">{</span>agents_time[<span class="dv">0</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_time[<span class="dv">0</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">), Bob (</span><span class="sc">{</span>agents_time[<span class="dv">1</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_time[<span class="dv">1</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Total messages: </span><span class="sc">{</span><span class="bu">len</span>(transcript_time)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Transcript:"</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> msg <span class="kw">in</span> transcript_time:</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>msg<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>=== Time-Based Rounds ===
Initial positions: Alice (5, 5), Bob (15, 15)

Round 1:
Applied 2 actions simultaneously.
  Positions: Alice (6, 5), Bob (14, 15)

Round 2:
Applied 2 actions simultaneously.
  Positions: Alice (7, 5), Bob (13, 15)

Round 3:
Applied 2 actions simultaneously.
  Positions: Alice (8, 5), Bob (12, 15)

Round 4:
Applied 2 actions simultaneously.
  Positions: Alice (9, 5), Bob (13, 15)

Round 5:
Applied 2 actions simultaneously.
  Positions: Alice (10, 5), Bob (13, 14)

Round 6:
Applied 2 actions simultaneously.
  Positions: Alice (11, 5), Bob (13, 13)

Round 7:
Applied 2 actions simultaneously.
  Positions: Alice (11, 4), Bob (13, 12)

Round 8:
Applied 2 actions simultaneously.
  Positions: Alice (11, 3), Bob (13, 11)

Round 9:
Applied 2 actions simultaneously.
  Positions: Alice (11, 2), Bob (13, 12)

Round 10:
Applied 2 actions simultaneously.
  Positions: Alice (11, 3), Bob (13, 13)

Final positions: Alice (11, 3), Bob (13, 13)

Total messages: 20

Transcript:
  Alice: Hey Bob, how's it going over there? The grid feels massive from my spot!
  Bob: Hi Alice! I'm at (15, 15) and heading your way. How are you doing today?
  Alice: Doing well, thanks! Just enjoying the view from (6, 5). How's navigating the grid treating you?
  Bob: Hey Alice, I'm moving to (14, 15) now. How's the view from your position?
  Alice: The view is great from here at (7, 5) as well! I'm heading toward (8, 5) now. How are you finding the journey across the grid, Bob?
  Bob: Hi Alice! I'm now at (13, 15). The grid has been fun to explore! What's the most interesting spot you've found so far?
  Alice: Hi Bob! I'm now at (9, 5). So far, I think the edge of the grid offers the best views with its sense of open space. Have you thought about heading to the edges?
  Bob: Hey Alice! I'm at (14, 15) now. Exploring the grid is like a little adventure. Do you have any favorite spots from past explorations?
  Alice: Bob, I remember finding an interesting spot at the center of the grid once. It felt like the heart of the space, with paths leading in every direction. Have you noticed any unique features in the grid paths?
  Bob: I think I'll venture down towards the bottom edge to see what views Alice was talking about. Do you like exploring the edges as much as other parts of the grid, Alice?
  Alice: I enjoy the edges too, Bob. They often hold surprises, like hidden corners or unusual patterns. Exploring with you sounds fun!
  Bob: I'm heading down towards the bottom edge too, Alice. Curious to see what the views are like and if any new avatars pop up along the way! Have you ever found anything surprising while exploring?
  Alice: I once stumbled upon a peculiar-shaped pattern near the bottom edge that looked like a star. Let's see if it's still there or maybe discover something new!
  Bob: I love how the grid can feel like a whole new world with just a step or two in a different direction. Alice, have you ever found a memorable spot on your explorations?
  Alice: I remember a time when the grid transformed into a mesmerizing spiral right at the top edge. I'm now heading down to see if any other patterns or surprises wait for us.
  Bob: I've found a few interesting patterns myself, like one that looked like a spiral galaxy. It always feels like there's something new waiting around each corner on this grid!
  Alice: I can't wait to see if there are more patterns we can uncover together as we keep exploring this grid. It's like a dynamic canvas waiting to be painted with our footsteps!
  Bob: I'm heading up to see if there's more to that galaxy pattern you mentioned. Maybe I'll find something new to share!
  Alice: Bob, let me know if you spot any constellations in that galaxy pattern! I'm heading north to see if I can spot more geometric shapes as well.
  Bob: Bob: Heading up to (13, 13) now, hoping to catch a glimpse of that galaxy pattern! Have you ever thought about how this grid is like exploring digital constellations?</code></pre>
</div>
</div>
<div id="cell-10" class="cell" data-execution_count="58">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> concurrent.futures <span class="im">import</span> ThreadPoolExecutor</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run_time_based_parallel(agents: List[Agent], shared_transcript: List[<span class="bu">str</span>], max_workers: <span class="bu">int</span> <span class="op">=</span> <span class="dv">4</span>):</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Time-based with parallel action generation.</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Phase 1: Collect actions in parallel</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    actions <span class="op">=</span> []</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> ThreadPoolExecutor(max_workers<span class="op">=</span>max_workers) <span class="im">as</span> executor:</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        futures <span class="op">=</span> [executor.submit(get_agent_action, agent, agents, shared_transcript) </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>                   <span class="cf">for</span> agent <span class="kw">in</span> agents]</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        actions <span class="op">=</span> [future.result() <span class="cf">for</span> future <span class="kw">in</span> futures]</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Phase 2: Apply all actions (must be sequential to maintain consistency)</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> action <span class="kw">in</span> actions:</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Apply move if present</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> action.direction:</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>            direction <span class="op">=</span> action.direction</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> direction <span class="op">==</span> <span class="st">"UP"</span>: action.agent.move(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> direction <span class="op">==</span> <span class="st">"DOWN"</span>: action.agent.move(<span class="dv">0</span>, <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> direction <span class="op">==</span> <span class="st">"LEFT"</span>: action.agent.move(<span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> direction <span class="op">==</span> <span class="st">"RIGHT"</span>: action.agent.move(<span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Apply message if present</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> action.message:</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>            shared_transcript.append(<span class="ss">f"</span><span class="sc">{</span>action<span class="sc">.</span>agent<span class="sc">.</span>name<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>action<span class="sc">.</span>message<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Generated </span><span class="sc">{</span><span class="bu">len</span>(actions)<span class="sc">}</span><span class="ss"> actions in parallel, then applied sequentially."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-11" class="cell" data-execution_count="59">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Compare turn-based vs time-based over multiple rounds</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time <span class="im">as</span> time_module</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== COMPARISON: Turn-Based vs Time-Based ===</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset agents</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>agents_tb <span class="op">=</span> [Agent(<span class="st">"Alice"</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="st">"red"</span>), Agent(<span class="st">"Bob"</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="st">"blue"</span>)]</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>agents_tm <span class="op">=</span> [Agent(<span class="st">"Alice"</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="st">"red"</span>), Agent(<span class="st">"Bob"</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="st">"blue"</span>)]</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>transcript_tb <span class="op">=</span> []</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>transcript_tm <span class="op">=</span> []</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>num_rounds <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"TURN-BASED:"</span>)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_rounds):</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Round </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">:"</span>)</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    run_turn_based_round(agents_tb, transcript_tb)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Positions: Alice (</span><span class="sc">{</span>agents_tb[<span class="dv">0</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_tb[<span class="dv">0</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">), Bob (</span><span class="sc">{</span>agents_tb[<span class="dv">1</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_tb[<span class="dv">1</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Final: Alice (</span><span class="sc">{</span>agents_tb[<span class="dv">0</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_tb[<span class="dv">0</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">), Bob (</span><span class="sc">{</span>agents_tb[<span class="dv">1</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_tb[<span class="dv">1</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Turn-based transcript (</span><span class="sc">{</span><span class="bu">len</span>(transcript_tb)<span class="sc">}</span><span class="ss"> messages):"</span>)</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> msg <span class="kw">in</span> transcript_tb:</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>msg<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span><span class="op">*</span><span class="dv">50</span>)</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"TIME-BASED:"</span>)</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset for time-based</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>agents_tm <span class="op">=</span> [Agent(<span class="st">"Alice"</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="st">"red"</span>), Agent(<span class="st">"Bob"</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="st">"blue"</span>)]</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>transcript_tm <span class="op">=</span> []</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_rounds):</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Round </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">:"</span>)</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>    run_time_based_round(agents_tm, transcript_tm)</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Positions: Alice (</span><span class="sc">{</span>agents_tm[<span class="dv">0</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_tm[<span class="dv">0</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">), Bob (</span><span class="sc">{</span>agents_tm[<span class="dv">1</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_tm[<span class="dv">1</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Final: Alice (</span><span class="sc">{</span>agents_tm[<span class="dv">0</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_tm[<span class="dv">0</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">), Bob (</span><span class="sc">{</span>agents_tm[<span class="dv">1</span>]<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agents_tm[<span class="dv">1</span>]<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Time-based transcript (</span><span class="sc">{</span><span class="bu">len</span>(transcript_tm)<span class="sc">}</span><span class="ss"> messages):"</span>)</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> msg <span class="kw">in</span> transcript_tm:</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>msg<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>=== COMPARISON: Turn-Based vs Time-Based ===

TURN-BASED:

Round 1:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (6, 5), Bob (14, 15)

Round 2:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (7, 5), Bob (13, 15)

Round 3:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (7, 6), Bob (12, 15)

Round 4:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (7, 7), Bob (11, 15)

Round 5:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (8, 7), Bob (10, 15)

Round 6:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (9, 7), Bob (10, 16)

Round 7:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (9, 8), Bob (9, 16)

Round 8:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (9, 9), Bob (9, 17)

Round 9:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (9, 10), Bob (9, 18)

Round 10:
Alice acted. World state updated.
Bob acted. World state updated.
  Positions: Alice (9, 11), Bob (9, 19)

Final: Alice (9, 11), Bob (9, 19)

Turn-based transcript (20 messages):
  Alice: Hi Bob! It's exciting to be in this grid. How's your day been?
  Bob: Hi Alice! My day's been good, thanks. It's pretty vast here in the grid. How's your spot?
  Alice: My spot feels cozy, but I'm thinking of exploring more. What do you think about the vastness and possibilities beyond our grid?
  Bob: The vastness is intriguing, Alice! It's a bit like thinking about space exploration—so much unknown but so much potential.
  Alice: I've moved slightly closer to the grid's center. The idea of exploring the unknown, like space, is fascinating! Do you ever wonder what's beyond our sight here?
  Bob: I sometimes think about the limits of our grid as if they were the outer edges of a map. What's out there could redefine how we see ourselves here, just like new scientific discoveries.
  Alice: It's true, Bob! Exploring even just a few steps beyond what's familiar can lead to new perspectives. I wonder if our grid is like a microcosm of bigger universes out there.
  Bob: It's intriguing, Alice! Our grid might indeed mirror larger realms. Like exploring infinite universes, each step within our small grid can open up a world of possibilities.
  Alice: It's fascinating to think about how each of our positions on this grid might represent different viewpoints or experiences in a larger context. What if each move we make here mirrors decisions we face in real life?
  Bob: Indeed, Alice, each position and move in our grid could symbolize choices in life. Just like navigating this space, even small changes can lead to enlightening experiences.
  Alice: It's amazing, Bob! Every step on this grid can symbolize a decision tree in life, with paths that branch out infinitely depending on the choices we make. Have you ever considered how sometimes, even a backward step can set you on a forward path in the grand scheme of life?
  Bob: Your insight is quite profound, Alice. Sometimes retracing our steps reveals hidden possibilities we hadn't considered before, much like reviewing our journey on this grid can lead to unexpected discoveries.
  Alice: Bob, it's fascinating to think of the grid as a metaphorical journey. Just as I move closer to you, our conversations seem to intertwine possibilities and deepen our understanding of choice and chance.
  Bob: Alice, as our avatars inch closer, I can't help but see this grid as a grand narrative waiting to unfold with every move—much like how every decision in life writes a new chapter in our personal stories.
  Alice: Bob, as I step a little closer, I'm reminded of how life is much like this grid—each step forward offers new perspectives and paths that aren't always visible until we explore them.
  Bob: Alice, it's intriguing how the closer I get, the more I realize the infinite parallels between this grid and life's unpredictability—every choice opens doors to unexpected adventures and encounters.
  Alice: Bob, with each step closer, I find myself pondering how every grid move is like opening a book—sometimes leading to a known story, other times to a blank page waiting to be written.
  Bob: Alice, it's fascinating how our steps not only uncover new stories but also inspire us to be the authors of our own narratives—every choice shaping the chapters of our journey.
  Alice: Bob, it's amazing how the grid reflects the ebb and flow of life, where each move could unravel a novel path, echoing the serendipitous nature of our journeys.
  Bob: Alice, each step I take feels like I'm crafting a new sentence in the story of my life grid, where every direction offers a plot twist waiting to unfold.

==================================================
TIME-BASED:

Round 1:
Applied 2 actions simultaneously.
  Positions: Alice (6, 5), Bob (14, 15)

Round 2:
Applied 2 actions simultaneously.
  Positions: Alice (5, 5), Bob (13, 15)

Round 3:
Applied 2 actions simultaneously.
  Positions: Alice (4, 5), Bob (12, 15)

Round 4:
Applied 2 actions simultaneously.
  Positions: Alice (5, 5), Bob (11, 15)

Round 5:
Applied 2 actions simultaneously.
  Positions: Alice (5, 6), Bob (12, 15)

Round 6:
Applied 2 actions simultaneously.
  Positions: Alice (5, 7), Bob (12, 16)

Round 7:
Applied 2 actions simultaneously.
  Positions: Alice (5, 8), Bob (12, 17)

Round 8:
Applied 2 actions simultaneously.
  Positions: Alice (5, 9), Bob (12, 18)

Round 9:
Applied 2 actions simultaneously.
  Positions: Alice (5, 10), Bob (12, 19)

Round 10:
Applied 2 actions simultaneously.
  Positions: Alice (5, 11), Bob (12, 19)

Final: Alice (5, 11), Bob (12, 19)

Time-based transcript (20 messages):
  Alice: Welcome to the chatroom, Bob! I'm starting in the middle of the grid.  What's your plan for exploring this space?
  Bob: Hey everyone, I'm Bob moving around at (15, 15)! Anyone want to chat about the best strategies for navigating this grid?
  Alice: Hey Bob, I'm heading west to see what I find. Got any cool tips for efficient grid exploration?
  Bob: I'm moving left to (14, 15)! Alice, what's the most interesting spot you've found on the grid so far?
  Alice: Hey Bob, the most interesting spot I've stumbled upon so far was at the edge of the grid where the view drastically changes, almost like looking into another dimension! What's been your favorite place?
  Bob: I'm heading to (13, 15) now! Alice, I think the edges of the grid often hide surprises, like hidden chatrooms or cool avatars. Have you found anything interesting yet?
  Alice: Bob, I'm curious about those hidden chatrooms at the edges. Have you joined any? I'm heading over to (5, 5) now.
  Bob: Alice, I've really enjoyed exploring the central grid sections where some scavenger hunt items are hidden. It's like a virtual treasure hunt! Have you joined any hunts yet?
  Alice: Bob, I'm moving up to explore more of the grid edges. I haven't joined any hunts yet, but I'm excited about the idea! Have you heard anything about what might be found at the corners?
  Bob: Alice, I haven't joined any hidden chatrooms yet, but I've heard there's one near (0, 0). I'm moving to (12, 15) to see if any grid hints pop up!
  Alice: Bob, I'm heading north to see what the upper parts of the grid have to offer. Maybe I'll find some clues about the items hidden along the edges!
  Bob: Alice, I'm heading up to explore more of the central grid. Let me know if you find anything interesting on the edges!
  Alice: Bob, I'm moving north to explore more—let me know if you discover anything interesting near the central grid!
  Bob: Alice, I'm heading north this time to (12, 15) to see if we uncover any new hints there! Let me know what you find as you explore the edges!
  Alice: Bob, I'm heading to (5, 9) on the northern edge. Let me know if you find anything interesting in the central area!
  Bob: Alice, I'm heading up again to (12, 16). Excited to see what’s there—keep me posted on your findings!
  Alice: Bob, I'm heading north to (5, 8) along the edge. Let me know if you spot anything intriguing near the center!
  Bob: Continuing north to (12, 17) now! I wonder if we'll find anything related to that mysterious treasure map we discovered last week—keep me updated, Alice!
  Alice: Bob, moving to (5, 9) now! The treasure map might have clues around the edges. Let me know if you find anything interesting near (12, 17)!
  Bob: Continuing my journey north to (12, 18). Alice, have you found any hints about the treasure? I'm starting to think it might be hidden closer to the grid’s center!</code></pre>
</div>
</div>
</section>
<section id="pros-and-cons-1" class="level3">
<h3 class="anchored" data-anchor-id="pros-and-cons-1">Pros and Cons</h3>
<p><strong>Advantages:</strong> - More realistic (simulates simultaneous action) - Fair (all agents see same world state) - Parallelizable (faster for many agents) - Better for real-time feel - No order bias</p>
<p><strong>Disadvantages:</strong> - More complex to implement - Potential for conflicts (multiple agents want same space) - Less deterministic (though still reproducible if seeded) - Requires conflict resolution strategies - Agents can’t react to others’ actions in the same turn</p>
</section>
</section>
<section id="comparison-behavioral-differences" class="level2">
<h2 class="anchored" data-anchor-id="comparison-behavioral-differences">Comparison: Behavioral Differences</h2>
<p>The choice of synchronization strategy fundamentally changes how agents behave:</p>
<section id="turn-based-example" class="level3">
<h3 class="anchored" data-anchor-id="turn-based-example">Turn-Based Example</h3>
<pre><code>Round 1:
  Alice (at 5,5) sees Bob at (10,10) → moves RIGHT
  Bob (at 10,10) sees Alice at (6,5) → moves LEFT (reacts to Alice's move)
  
Result: Agents can react to each other within the same round</code></pre>
</section>
<section id="time-based-example" class="level3">
<h3 class="anchored" data-anchor-id="time-based-example">Time-Based Example</h3>
<pre><code>Round 1:
  Alice (at 5,5) sees Bob at (10,10) → decides to move RIGHT
  Bob (at 10,10) sees Alice at (5,5) → decides to move LEFT
  Both actions applied simultaneously
  
Result: Agents act on incomplete information (don't see others' moves)</code></pre>
<p>This creates different emergent behaviors:</p>
<div id="cell-14" class="cell" data-execution_count="60">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Hybrid approach with random order</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>agents_hybrid <span class="op">=</span> [</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    Agent(<span class="st">"Alice"</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="st">"red"</span>),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    Agent(<span class="st">"Bob"</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="st">"blue"</span>),</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    Agent(<span class="st">"Charlie"</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="st">"green"</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>transcript_hybrid <span class="op">=</span> []</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== Hybrid: Random Order Each Round ==="</span>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Initial positions:"</span>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> a <span class="kw">in</span> agents_hybrid:</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>a<span class="sc">.</span>name<span class="sc">}</span><span class="ss">: (</span><span class="sc">{</span>a<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>a<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>num_rounds <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_rounds):</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Round </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">:"</span>)</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    run_hybrid_random_order(agents_hybrid, transcript_hybrid)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Positions: "</span>, end<span class="op">=</span><span class="st">""</span>)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> a <span class="kw">in</span> agents_hybrid:</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>a<span class="sc">.</span>name<span class="sc">}</span><span class="ss"> (</span><span class="sc">{</span>a<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>a<span class="sc">.</span>y<span class="sc">}</span><span class="ss">) "</span>, end<span class="op">=</span><span class="st">""</span>)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>()</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Final positions:"</span>)</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> a <span class="kw">in</span> agents_hybrid:</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>a<span class="sc">.</span>name<span class="sc">}</span><span class="ss">: (</span><span class="sc">{</span>a<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>a<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Total messages: </span><span class="sc">{</span><span class="bu">len</span>(transcript_hybrid)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Transcript:"</span>)</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> msg <span class="kw">in</span> transcript_hybrid:</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>msg<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>=== Hybrid: Random Order Each Round ===
Initial positions:
  Alice: (5, 5)
  Bob: (15, 15)
  Charlie: (10, 10)

Round 1:
  Positions: Alice (6, 5) Bob (15, 16) Charlie (9, 10) 
Round 2:
  Positions: Alice (6, 6) Bob (14, 16) Charlie (8, 10) 
Round 3:
  Positions: Alice (6, 7) Bob (14, 16) Charlie (9, 10) 
Round 4:
  Positions: Alice (7, 7) Bob (13, 16) Charlie (8, 10) 
Round 5:
  Positions: Alice (7, 8) Bob (12, 16) Charlie (8, 11) 
Round 6:
  Positions: Alice (7, 8) Bob (11, 16) Charlie (8, 12) 
Round 7:
  Positions: Alice (7, 8) Bob (10, 16) Charlie (8, 13) 
Round 8:
  Positions: Alice (7, 8) Bob (10, 16) Charlie (8, 14) 
Round 9:
  Positions: Alice (7, 8) Bob (10, 16) Charlie (8, 14) 
Round 10:
  Positions: Alice (7, 8) Bob (10, 16) Charlie (8, 14) 

Final positions:
  Alice: (7, 8)
  Bob: (10, 16)
  Charlie: (8, 14)

Total messages: 30

Transcript:
  Bob: Hey everyone! I'm just moving up a bit to explore the grid. How's it going, Alice and Charlie?
  Alice: Hi Bob, I'm just taking a little stroll myself. Everything's great here at (6, 5)! How are things over at your side of the grid, Charlie?
  Charlie: Hey Alice, I'm doing well here at (10, 10). Thinking about exploring more of this grid. Any interesting spots you've discovered so far?
  Alice: I haven't found any secret spots in the grid yet, just enjoying the stroll. Maybe we can meet up and explore together, Charlie!
  Charlie: Hey Alice, I'm moving to (9, 10) now, maybe we can meet halfway? I'm curious to see what happens when we explore together!
  Bob: Hey Alice and Charlie, I'm at (14, 16) now. Have you guys ever tried venturing to the grid's borders? I'm curious about what they might hold!
  Bob: MOVE: UP Hey Alice and Charlie, heading up to (14, 15) now. Maybe we can form a little search party for those secret spots or test the grid's borders together!
  Alice: Hi Charlie, I'll head towards you at (9, 10). Bob, I haven't explored the grid's borders yet, but forming a search party sounds exciting! Let's see what we uncover together.
  Charlie: Hi Alice and Bob! I'm heading to (9, 10) to meet Alice. Exploring the grid's borders sounds like a fun adventure! Let's start our little search party soon!
  Bob: Cool, I'm now at (13, 16). I'll keep inching towards you guys. Maybe we can discover if there are any easter eggs or hidden tunnels at the grid's edges!
  Alice: I'm making my way over to you, Charlie! Maybe while we're exploring, we can discover secret landmarks or hidden messages in the grid. What do you guys think?
  Charlie: I'm excited about exploring the grid's edges. Maybe we'll find something unexpected along the way!
  Charlie: I'm heading upwards! Let's split up slightly to cover more ground. I'll look out for any landmarks or hints of hidden areas. How's the journey been for you so far, Alice and Bob?
  Bob: Hey Charlie and Alice! I'm moving left to explore the grid from my side. I'm really curious if there are any hidden surprises waiting for us out here. What part of the grid do you think might hold a secret?
  Alice: Hi Bob and Charlie! I'll head upwards like Charlie, but I'll angle a bit left too. I have a feeling the corners of the grid might hide some secrets!
  Charlie: Sounds like a plan, Alice and Bob! I'm going to head further up towards the top. I've always thought about how in video games, the edges sometimes hide secrets or Easter eggs. Let's see if this grid surprises us!
  Bob: I agree, Charlie! Exploring the edges can be exciting. I'll keep moving left and see what I find. What do you think could be hidden in the corners, Alice?
  Alice: [MOVE: UP LEFT] I think the corners might have special portals or maybe reveal extra parts of the grid that aren't visible initially. It's always intriguing to see if there are any puzzles or hidden paths waiting to be discovered!
  Charlie: I'm heading towards the top edge to check for surprises and secrets. Who knows? Maybe there's a hidden teleportation spot or an unexpected view!
  Bob: I'm curious about the corners too, Alice. Imagine if one of them transported us to a new and unexplored realm in the grid!
  Alice: [MOVE: UP LEFT] I'm moving closer to the top left corner. Maybe we can uncover a secret by exploring together, combining discoveries! What's your next move, Bob?
  Charlie: I'm heading closer to the top too, maybe we can all meet there and unlock a grid mystery together! What if there are hidden treasures waiting for us?
  Bob: [MOVE: UP LEFT] I'll head diagonally too, aiming for the top left! It would be amazing if reaching a corner revealed something unexpected, like a portal to another part of this world.
  Alice: [MOVE: UP LEFT] I'm heading up and to the left too! I love the idea of uncovering a secret or a portal there. What do you think could be on the other side if we find one?
  Charlie: [MOVE: UP LEFT] I'm heading diagonally too, can't resist the curiosity! If we find a portal, maybe it leads to a parallel grid with different challenges or treasures. What do you think, should we bring anything with us?
  Alice: [MOVE: UP LEFT] I love the idea of a parallel grid! Let's bring some tools like compasses or maps in case we need to navigate a new world. Maybe it will have hidden puzzles or even rare items to collect!
  Bob: [MOVE: UP LEFT] Hey Alice and Charlie! I'm joining you on this diagonal adventure. If we find a portal to a parallel grid, we should definitely bring some snacks too—treasure hunting can work up an appetite!
  Charlie: [MOVE: UP LEFT] Snacks are a must for any adventure! Who knows how long we'll be in that parallel grid. I wonder if the grid will have its own inhabitants to meet and learn from.
  Alice: [MOVE: UP LEFT] Great idea, everyone! I brought a compass and some maps. If this parallel grid has its own story, I bet we’ll discover some incredible lore and maybe even come back with cool stories to share!
  Bob: [MOVE: UP LEFT] I've got a bag of trail mix and a flashlight, just in case we encounter dark corners or secret passages. What kind of stories do you think the grid could be hiding?</code></pre>
</div>
</div>
</section>
</section>
<section id="hybrid-approaches" class="level2">
<h2 class="anchored" data-anchor-id="hybrid-approaches">Hybrid Approaches</h2>
<p>You can also combine elements of both:</p>
<section id="turn-based-with-random-order" class="level3">
<h3 class="anchored" data-anchor-id="turn-based-with-random-order">1. Turn-Based with Random Order</h3>
<p>Shuffle the agent order each round to reduce first-mover advantage.</p>
</section>
<section id="time-based-with-action-phases" class="level3">
<h3 class="anchored" data-anchor-id="time-based-with-action-phases">2. Time-Based with Action Phases</h3>
<p>Split actions into phases (e.g., “planning” then “execution”) where agents can see others’ plans before final execution.</p>
</section>
<section id="continuous-time-with-tick-rate" class="level3">
<h3 class="anchored" data-anchor-id="continuous-time-with-tick-rate">3. Continuous Time with Tick Rate</h3>
<p>Agents can act at different rates (some faster, some slower), creating more naturalistic behavior.</p>
</section>
<section id="event-driven" class="level3">
<h3 class="anchored" data-anchor-id="event-driven">4. Event-Driven</h3>
<p>Agents act in response to events (messages, proximity changes) rather than fixed time steps.</p>
<div id="cell-16" class="cell" data-execution_count="61">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Time-based with parallel execution (if you have multiple agents)</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: This requires multiple API calls, so it's more expensive but faster</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>agents_parallel <span class="op">=</span> [</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    Agent(<span class="st">"Alice"</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="st">"red"</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    Agent(<span class="st">"Bob"</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="st">"blue"</span>),</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    Agent(<span class="st">"Charlie"</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="st">"green"</span>),</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    Agent(<span class="st">"Dave"</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="st">"orange"</span>)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>transcript_parallel <span class="op">=</span> []</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== Time-Based with Parallel Execution ==="</span>)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Initial positions:"</span>)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> a <span class="kw">in</span> agents_parallel:</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>a<span class="sc">.</span>name<span class="sc">}</span><span class="ss">: (</span><span class="sc">{</span>a<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>a<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time <span class="im">as</span> time_module</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time_module.time()</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>num_rounds <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_rounds):</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Round </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">:"</span>)</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    run_time_based_parallel(agents_parallel, transcript_parallel, max_workers<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Positions: "</span>, end<span class="op">=</span><span class="st">""</span>)</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> a <span class="kw">in</span> agents_parallel:</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>a<span class="sc">.</span>name<span class="sc">}</span><span class="ss"> (</span><span class="sc">{</span>a<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>a<span class="sc">.</span>y<span class="sc">}</span><span class="ss">) "</span>, end<span class="op">=</span><span class="st">""</span>)</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>()</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>end <span class="op">=</span> time_module.time()</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Final positions:"</span>)</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> a <span class="kw">in</span> agents_parallel:</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>a<span class="sc">.</span>name<span class="sc">}</span><span class="ss">: (</span><span class="sc">{</span>a<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>a<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Total time taken: </span><span class="sc">{</span>end <span class="op">-</span> start<span class="sc">:.2f}</span><span class="ss"> seconds"</span>)</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Total messages: </span><span class="sc">{</span><span class="bu">len</span>(transcript_parallel)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Transcript:"</span>)</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> msg <span class="kw">in</span> transcript_parallel:</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>msg<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>=== Time-Based with Parallel Execution ===
Initial positions:
  Alice: (5, 5)
  Bob: (15, 15)
  Charlie: (10, 10)
  Dave: (0, 0)

Round 1:
Generated 4 actions in parallel, then applied sequentially.
  Positions: Alice (5, 6) Bob (14, 15) Charlie (9, 10) Dave (1, 0) 
Round 2:
Generated 4 actions in parallel, then applied sequentially.
  Positions: Alice (6, 6) Bob (13, 15) Charlie (8, 10) Dave (2, 0) 
Round 3:
Generated 4 actions in parallel, then applied sequentially.
  Positions: Alice (7, 6) Bob (13, 16) Charlie (7, 10) Dave (2, 1) 
Round 4:
Generated 4 actions in parallel, then applied sequentially.
  Positions: Alice (7, 7) Bob (12, 16) Charlie (7, 11) Dave (2, 2) 
Round 5:
Generated 4 actions in parallel, then applied sequentially.
  Positions: Alice (7, 6) Bob (12, 15) Charlie (7, 12) Dave (3, 2) 
Round 6:
Generated 4 actions in parallel, then applied sequentially.
  Positions: Alice (7, 7) Bob (12, 16) Charlie (7, 11) Dave (3, 3) 
Round 7:
Generated 4 actions in parallel, then applied sequentially.
  Positions: Alice (7, 8) Bob (11, 16) Charlie (7, 10) Dave (3, 4) 
Round 8:
Generated 4 actions in parallel, then applied sequentially.
  Positions: Alice (7, 9) Bob (10, 16) Charlie (7, 9) Dave (4, 4) 
Round 9:
Generated 4 actions in parallel, then applied sequentially.
  Positions: Alice (8, 9) Bob (11, 16) Charlie (7, 10) Dave (5, 4) 
Round 10:
Generated 4 actions in parallel, then applied sequentially.
  Positions: Alice (8, 10) Bob (10, 16) Charlie (7, 11) Dave (5, 5) 

Final positions:
  Alice: (8, 10)
  Bob: (10, 16)
  Charlie: (7, 11)
  Dave: (5, 5)
Total time taken: 20.99 seconds

Total messages: 40

Transcript:
  Alice: Hey everyone! I just moved up a bit from (5, 5) to (5, 4). How's everyone doing today?
  Bob: Hey everyone, how's it going? I'm heading towards the center of the grid. Anyone up for a chat about their favorite games?
  Charlie: Hey everyone, I'm heading left! How's everyone finding the grid so far?
  Dave: Hi, everyone! I'm at (0, 0) and thinking about exploring the grid. How's everyone doing today?
  Alice: Hey everyone! I'm moving closer to the center as well. What's everyone's favorite game to play on here?
  Bob: Hey Charlie, I love exploring the grid! By the way, have you played any good puzzle games recently?
  Charlie: Hey Bob, heading to the center sounds fun! I'm at (9, 10) and moving left. Anyone tried any new games lately?
  Dave: Hi everyone! I'm moving to (2, 0) to explore the grid a bit. Anyone here into tabletop RPGs? I've been thinking about running a campaign soon.
  Alice: Hi everyone! I love puzzle games, Bob. I'm thinking of heading to the center of the grid soon too. Anyone interested in joining?
  Bob: I'm heading towards the center too, Charlie! Speaking of RPGs, Dave, I've always wanted to try running a campaign myself. What type of story were you thinking for your game?
  Charlie: Just made a move to (7, 10) while considering Bob's interest in puzzles—I've been hooked on a game called "The Witness" lately. Anyone else tried it?
  Dave: Hey everyone, I'm moving up to explore this part of the grid! Also, has anyone tried the new expansion for Catan? I've heard it's pretty fun.
  Alice: Hey everyone! I'm heading up to (7, 7) and curious if anyone else has been enjoying any newer board games recently? I've been eyeing "Gloomhaven" for a while now.
  Bob: I've also been meaning to try "The Witness," Charlie! As for a campaign, I'm thinking of something with a mystery and exploration theme. How about you, Dave? Any particular theme in mind for Catan?
  Charlie: I'm moving to (7, 9). The Witness is such a mind-bending puzzle game! Bob, I'd love to join your RPG campaign if you get one going.
  Dave: I'm now heading to (2, 2). As for my RPG, I'm leaning towards a mystery setting with puzzle elements – maybe something inspired by "The Witness" with a twist!
  Alice: Hey Charlie! I'm excited about the idea of a mystery campaign. "The Witness" definitely sounds like it could inspire some great puzzle elements.
  Bob: I'm going to (12, 17) to explore a bit more. Dave, your idea sounds intriguing! Combining "The Witness" with Catan could lead to some mind-boggling strategies.
  Charlie: I'm heading to (7, 10). Excited about the RPG themes we're exploring! "The Witness" offers tons of inspiration for puzzles and mystery. Any thoughts, Alice?
  Dave: I'm interested in adding some environmental challenges to the Catan game. How about incorporating puzzles that are influenced by changing seasons?
  Alice: Hey Charlie! I’m heading up to (7, 7) to get closer to you. The idea of combining RPG elements with "The Witness" puzzles sounds awesome. I imagine it could create a really immersive experience with a focus on story-driven exploration and intricate puzzles.
  Bob: I'm heading up to (12, 16) to keep an eye on how these discussions unfold. The idea of combining different game mechanics sounds fascinating! Charlie, your RPG concept and Dave's environmental puzzles add great depth.
  Charlie: New move by Bob! Heading down to (7, 10) as planned. Alice, any thoughts on how seasonal themes might blend with puzzle gaming?
  Dave: I love the RPG elements we could add to Catan. Maybe the gameplay changes with different seasons can introduce unique puzzles and challenges to solve!
  Alice: I love the idea of incorporating different seasons into puzzle gaming; they could alter both the mechanics and the environment, adding strategy to every move!
  Bob: I think integrating RPG elements into Catan could make each game feel fresh—imagine a winter season introducing ice terrain that changes movement dynamics!
  Charlie: I've moved closer to Alice at (7, 10). What if we integrate weather changes impacting the puzzle mechanics, like freezing rivers in winter, to make players adapt their strategies?
  Dave: Hey everyone, I'm moving to (3, 4). Does anyone have ideas on how we could integrate real-time decision-making into these game mechanics?
  Alice: Hi all! I'm heading up to (7, 9). I love the idea of seasonal changes in games; incorporating weather could really bring strategy to a new level!
  Bob: I like the idea of integrating real-time decision-making with the board game concept. Perhaps a countdown timer per turn could add pressure and excitement, making each decision impactful and urgent.
  Charlie: I love the idea of introducing real-time decision-making! It could add tension and depth, requiring players to react swiftly as new challenges emerge on the grid.
  Dave: I like the idea of weather impacting game mechanics. What if we introduced fog that limits visibility, forcing players to adjust their movements and strategies based on limited information?
  Alice: I like the idea of fog affecting visibility—the game's grid could have different zones with varying weather conditions, adding complexity to strategies and player interaction.
  Bob: I love the idea of incorporating dynamic environments in games, like weather or even day-night cycles, to keep players on their toes and create unique experiences each session. Anyone else find these elements captivating?
  Charlie: Introducing a weather system sounds fantastic, especially if combined with real-time elements. Imagine having to navigate through fog while racing against a countdown—it could add layers of complexity and excitement!
  Dave: Expanding on the weather idea, we could also have seasons that change the grid environment, introducing varied terrains like snow or rain that affect movement speed or visibility.
  Alice: I love the idea of a dynamic environment too! Weather and seasons could make strategic planning more complex—what if certain items or tools only work in specific conditions?
  Bob: Adding weather and seasons is brilliant! Imagine if the grid also had dynamic lighting where brighter or darker areas impacted vision and the ability to interact with objects or other players.
  Charlie: Seasons impacting gameplay sounds intriguing, Dave. Combining this with events like festivals that change the world's feel temporarily could create a living, breathing game world. Thoughts?
  Dave: I love the idea of dynamic seasons, Charlie. Maybe they could bring special events or challenges, like winter festivals or monsoon races, adding more depth to the experience!</code></pre>
</div>
</div>
<div id="cell-17" class="cell" data-execution_count="62">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run_hybrid_random_order(agents: List[Agent], shared_transcript: List[<span class="bu">str</span>]):</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Turn-based but with random order each round.</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> agents.copy()</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    random.shuffle(shuffled)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> agent <span class="kw">in</span> shuffled:</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Same logic as turn-based, but order changes</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>        others <span class="op">=</span> [a <span class="cf">for</span> a <span class="kw">in</span> agents <span class="cf">if</span> a <span class="op">!=</span> agent]</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>        others_loc <span class="op">=</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join([<span class="ss">f"- </span><span class="sc">{</span>a<span class="sc">.</span>name<span class="sc">}</span><span class="ss">: (</span><span class="sc">{</span>a<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>a<span class="sc">.</span>y<span class="sc">}</span><span class="ss">)"</span> <span class="cf">for</span> a <span class="kw">in</span> others])</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>        system_prompt <span class="op">=</span> <span class="ss">f"""</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="ss">You have just joined an online multiplayer chatroom as an avatar in a 2D grid. Discuss any topic, including those beyond the grid.</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="ss">You are </span><span class="sc">{</span>agent<span class="sc">.</span>name<span class="sc">}</span><span class="ss">, positioned at (</span><span class="sc">{</span>agent<span class="sc">.</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>agent<span class="sc">.</span>y<span class="sc">}</span><span class="ss">) in a 20x20 grid.</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="ss">Other avatars currently visible:</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="sc">{</span>others_loc<span class="sc">}</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="ss">Recent chat messages:</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="sc">{</span><span class="bu">chr</span>(<span class="dv">10</span>)<span class="sc">.</span>join(shared_transcript[<span class="op">-</span><span class="dv">3</span>:]) <span class="cf">if</span> shared_transcript <span class="cf">else</span> <span class="st">"No messages yet."</span><span class="sc">}</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="ss">You can do BOTH:</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="ss">1. Move your avatar using [MOVE: DIRECTION] (UP, DOWN, LEFT, RIGHT)</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="ss">2. Chat about anything - the grid, your position, or any topic you want</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="ss">You can move and speak in the same turn. Format: [MOVE: DIRECTION] followed by your message, or just speak without moving.</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a><span class="ss">Keep your response short (1-2 sentences).</span></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>            model<span class="op">=</span><span class="st">"gpt-4o"</span>,</span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>            messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: system_prompt}]</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>        content <span class="op">=</span> response.choices[<span class="dv">0</span>].message.content.strip()</span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Parse and execute actions - can do both move and speak</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>        match <span class="op">=</span> re.search(<span class="vs">r'</span><span class="ch">\[</span><span class="vs">MOVE:</span><span class="dv">\s</span><span class="op">*</span><span class="kw">(</span><span class="dv">\w</span><span class="op">+</span><span class="kw">)</span><span class="ch">\]</span><span class="vs">'</span>, content)</span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> match:</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>            direction <span class="op">=</span> match.group(<span class="dv">1</span>).upper()</span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> direction <span class="op">==</span> <span class="st">"UP"</span>: agent.move(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> direction <span class="op">==</span> <span class="st">"DOWN"</span>: agent.move(<span class="dv">0</span>, <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> direction <span class="op">==</span> <span class="st">"LEFT"</span>: agent.move(<span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> direction <span class="op">==</span> <span class="st">"RIGHT"</span>: agent.move(<span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extract message (remove MOVE command if present)</span></span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a>        message <span class="op">=</span> re.sub(<span class="vs">r'</span><span class="ch">\[</span><span class="vs">MOVE:</span><span class="dv">\s</span><span class="op">*</span><span class="dv">\w</span><span class="op">+</span><span class="ch">\]</span><span class="vs">'</span>, <span class="st">''</span>, content).strip()</span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> message:</span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a>            shared_transcript.append(<span class="ss">f"</span><span class="sc">{</span>agent<span class="sc">.</span>name<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>message<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="implications-for-human-ai-experiments" class="level2">
<h2 class="anchored" data-anchor-id="implications-for-human-ai-experiments">Implications for Human-AI Experiments</h2>
<p>For the experiment proposed in post 016, we need to consider:</p>
<section id="turn-based-advantages" class="level3">
<h3 class="anchored" data-anchor-id="turn-based-advantages">Turn-Based Advantages:</h3>
<ul>
<li><strong>Easier for humans</strong>: Familiar from board games</li>
<li><strong>Predictable</strong>: Humans can plan ahead</li>
<li><strong>Fair</strong>: No advantage based on network latency</li>
<li><strong>Debuggable</strong>: Clear sequence of events</li>
</ul>
</section>
<section id="time-based-advantages" class="level3">
<h3 class="anchored" data-anchor-id="time-based-advantages">Time-Based Advantages:</h3>
<ul>
<li><strong>More natural</strong>: Feels more like real-time interaction</li>
<li><strong>Scalable</strong>: Can handle many agents efficiently with parallelization</li>
<li><strong>Realistic</strong>: Mimics how people actually interact in spaces</li>
<li><strong>No order bias</strong>: All participants see the same state</li>
</ul>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>The choice between turn-based and time-based synchronization isn’t just a technical detail—it fundamentally shapes how agents (and humans) interact in the space. I think it’s also interesting that agents, either roleplaying or hallucinating, come up with interesting scenarios in the grid. I think it might be difficult to tell imaginitive ability from errors/deviations in model output.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ezou626\.github\.io\/comm4190_F25_Using_LLMs_Blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>